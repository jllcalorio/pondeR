% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_diff.R
\name{plot_diff}
\alias{plot_diff}
\title{Create Box or Violin Plots with Statistical Comparisons}
\usage{
plot_diff(
  x,
  outcome,
  group,
  plot_vars = NULL,
  plot_type = "boxplot",
  test_type = NULL,
  posthoc = NULL,
  p_adjust_method = "BH",
  hide_ns = TRUE,
  show_p_numeric = FALSE,
  paired = FALSE,
  test_alpha = 0.05,
  colors = NULL,
  plot_title = NULL,
  xlab = NULL,
  ylab = NULL,
  global_p_position = NULL,
  global_p_x = NULL,
  title_size = 12,
  subtitle_size = 10,
  xlab_size = 11,
  ylab_size = 11,
  axis_text_size = 10,
  group_order = NULL,
  label_points = NULL,
  sample_id = NULL,
  show_mean = FALSE,
  show_agg_val = TRUE,
  horizontal = FALSE,
  bracket_spacing = 0.08,
  ...
)
}
\arguments{
\item{x}{A data frame containing the variables to plot.}

\item{outcome}{Character string specifying the column name for the numeric outcome variable. Used as the default for \code{plot_vars} if it is not specified.}

\item{group}{Character string specifying the column name for the grouping variable.}

\item{plot_vars}{Character vector specifying column name(s) for numeric variables to plot. If \code{NULL} (default), uses the value of \code{outcome}.}

\item{plot_type}{Character string specifying plot type: "boxplot" or "violin". Default is "boxplot".}

\item{test_type}{Character string or NULL. Statistical test strategy to use: "auto", "parametric", "nonparametric". See \code{\link{run_diff}} for details. If NULL (default), uses "auto".}

\item{posthoc}{Character string or NULL. Post-hoc test for multiple groups:
"auto", "none", "tukey", "games-howell", "dunn", "t_test", or "wilcox_test". See \code{\link{run_diff}} for details. If NULL (default), uses "auto".}

\item{p_adjust_method}{Character string. P-value adjustment method for multiple comparisons.
Options include "holm", "hochberg", "hommel", "bonferroni", "BH", "BY", "fdr", "none".
Default is "BH".}

\item{hide_ns}{Logical. If TRUE, hide non-significant p-values from plot brackets. Default is TRUE.}

\item{show_p_numeric}{Logical. If TRUE, show exact p-values as numbers instead of
significance symbols (*, **, ***). Default is FALSE.}

\item{paired}{Logical. If TRUE, use paired tests. Default is FALSE.}

\item{test_alpha}{Numeric. Significance level for determining significance on the plot. Default is 0.05.}

\item{colors}{Character vector of colors (names or HEX codes) or NULL for automatic soft colors.
Can be a single color or a vector of colors. Default is NULL.}

\item{plot_title}{Character string or NULL. Custom title for the plot. If NULL, generates
an automatic title. Default is NULL.}

\item{xlab}{Character string or NULL. X-axis label. If NULL, uses group variable name. Default is NULL.}

\item{ylab}{Character string or NULL. Y-axis label. If NULL, uses plot variable name. Default is NULL.}

\item{global_p_position}{Numeric or NULL. Y-axis position for the global p-value as data coordinates.
If NULL (default), automatically positions at the top-right of the plot area.}

\item{global_p_x}{Numeric or NULL. X-axis position for the global p-value. If NULL (default),
positions at 95\% of the x-axis range (right side). Only used when n_groups > 2.}

\item{title_size}{Numeric. Font size for the plot title. Default is 12.}

\item{subtitle_size}{Numeric. Font size for the plot subtitle. Default is 10.}

\item{xlab_size}{Numeric. Font size for the x-axis label. Default is 11.}

\item{ylab_size}{Numeric. Font size for the y-axis label. Default is 11.}

\item{axis_text_size}{Numeric. Font size for axis text. Default is 10.}

\item{group_order}{Character vector or NULL. Specifies the order of groups on the x-axis.
If NULL (default), uses factor levels or alphabetical order.}

\item{label_points}{Character string or NULL. Specifies point labeling: "all" (label all jitter points),
"outliers" (label only outliers), or NULL (default, no labels). Requires sample_id parameter.}

\item{sample_id}{Character string or NULL. Column name in data containing sample identifiers
for point labeling. Required when label_points is not NULL.}

\item{show_mean}{Logical. If TRUE, add a red dot (mean indicator) to plots. Default is FALSE.}

\item{show_agg_val}{Logical. If TRUE (default), shows the numeric value of the mean
(for parametric tests) or median (for non-parametric tests) on the plot.}

\item{horizontal}{Logical. If TRUE, flip the plot to horizontal orientation. Default is FALSE.}

\item{bracket_spacing}{Numeric. Multiplier for spacing between comparison brackets. Default is 0.08.}

\item{...}{Additional arguments passed to ggboxplot or ggviolin from ggpubr.}
}
\value{
A list containing:
\item{plots}{List of all generated plots.}
\item{significant_plots}{List of plots with significant results only.}
\item{statistics}{List of statistical test results for each variable (output from \code{\link{run_diff}}).}
}
\description{
This function generates box plots or violin plots with statistical tests and
pairwise comparisons. It automatically selects appropriate statistical tests
based on assumptions, or allows manual specification. Statistical testing is
performed using the companion function \code{\link{run_diff}}.
}
\examples{
\dontrun{
# Example 1: Show mean dot AND mean value
results_anova <- plot_diff(
  x = PlantGrowth,
  outcome = "weight",
  group = "group",
  plot_type = "boxplot",
  show_mean = TRUE,
  show_agg_val = TRUE
)
print(results_anova$plots$weight)

# Example 2: Paired t-test, show only mean dot
sleep_data <- sleep
sleep_data$ID <- rep(1:10, 2) # Create a patient ID column

results_paired <- plot_diff(
  x = sleep_data,
  outcome = "extra",
  group = "group",
  paired = TRUE,
  show_mean = TRUE,
  show_agg_val = FALSE
)
print(results_paired$plots$extra)
}

}
